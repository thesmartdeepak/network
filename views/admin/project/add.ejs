<% layout('../layout/layout') -%>
<!-- Main content -->
<section class="content" ng-controller="ctrl">
  <div class="box box-primary" id="addFileSection">
    <form id="addProjectForm" method="post" ng-submit="submit()" enctype="multipart/form-data">
      <div class="box-body">
        <div class="form-group">
          <label>Department</label>
          <select class="form-control" name="department" ng-model="departmentModel" ng-change="departmentChange()"  required>
            <option value="">Select Department</option>
            <option ng-repeat="department in departments" value="{{ department._id }}">{{ department.name }}</option>
          </select>
        </div>

        <div class="form-group" ng-show="departmentModel">
          <label>Project Type</label>
          <select class="form-control" name="projectType" ng-model="projectTypeModel" required>
            <option value="">Select Project Type</option>
            <option ng-repeat="projectType in projectTypes" value="{{ projectType._id }}">{{ projectType.name }}</option>
          </select>
        </div>

        <div class="form-group">
          <label>Upload CSV</label>
          <input id="excelFile" type="file" class="" name="excelFile" required>
        </div>
      </div>
      <!-- /.box-body -->

      <div class="box-footer">
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
    </form>
  </div>

  <div class="tableMainBox" id="errorTbl" style="display:none;">
    <table class="mainTable" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr class="headingRow">
        <td>Activity_Description</td>
        <td>Site_Id</td>
        <td>Site_Count</td>
        <td>Pre_Done_Date</td>
        <td>Post_Activity_Done_Date</td>
        <td>Activity_Status</td>
        <td>Remarks</td>
        <td>Report_Status</td>
        <td>Report_Acceptance_Status</td>
        <td>Client_Remark</td>
        <td>Employee_Id</td>
      </tr>
      <tr class="dataRow" ng-repeat="errorData in errorDataList">
        <td class="{{ errorClass(errorData.errors,'activity') }}">{{ errorData.data.activity }}</td>
        <td class="{{ errorClass(errorData.errors,'siteId') }}">{{ errorData.data.siteId }}</td>
        <td class="{{ errorClass(errorData.errors,'siteCount') }}">{{ errorData.data.siteCount }}</td>
        <td class="{{ errorClass(errorData.errors,'preDoneDate') }}">{{ errorData.data.preDoneDate }}</td>
        <td class="{{ errorClass(errorData.errors,'preDoneDate') }}">{{ errorData.data.post_ActivityDoneDate }}</td>
        <td class="{{ errorClass(errorData.errors,'activityStatus') }}">{{ errorData.data.activityStatus }}</td>
        <td class="{{ errorClass(errorData.errors,'remark') }}">{{ errorData.data.remark }}</td>
        <td class="{{ errorClass(errorData.errors,'reportStatus') }}">{{ errorData.data.reportStatus }}</td>
        <td class="{{ errorClass(errorData.errors,'reportAcceptanceStatus') }}">{{ errorData.data.reportAcceptanceStatus }}</td>
        <td class="{{ errorClass(errorData.errors,'clientRemark') }}">{{ errorData.data.clientRemark }}</td>
        <td class="{{ errorClass(errorData.errors,'employeeId') }}">{{ errorData.data.employeeId }}</td>
      </tr>
    </table>
    <button ng-click="reUpload()">Re upload</button>
  </div>
</section>

<link href="admin/css/network.css" rel="stylesheet">
<script src="/admin/js/project/add.js"></script>